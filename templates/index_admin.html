<!-- templates/index.html -->
{% extends "layout.html" %}
{% block content %}
    <h2>Cars Overview</h2>

    {% if cars %}
        {% for car in cars %}
            <div class="card" onclick="window.location.href='{{ url_for('car_details', car_id=car['id']) }}'">
                <div class="card-header">
                    <h3>{{ car['make'] }} {{ car['model'] }} ({{ car['year'] }})</h3>
                    <span>License: {{ car['license_plate'] }}</span>
                </div>
                <p><strong>Color:</strong> {{ car['color'] }}</p>

                {% if car['record_count'] > 0 %}
                    <p>
                        <strong>Max Speed:</strong>
                        <span class="{% if car['max_speed'] > 70 %}speed-high{% else %}speed-normal{% endif %}">
                            {{ car['max_speed']|round(1) }} mph
                        </span>
                    </p>
                    <p><strong>Average Speed:</strong> {{ car['avg_speed']|round(1) }} mph</p>
                    <p><strong>Total Records:</strong> {{ car['record_count'] }}</p>
                {% else %}
                    <p>No speed records available</p>
                {% endif %}

                <a href="{{ url_for('car_details', car_id=car['id']) }}" class="btn">View Details</a>
            </div>
        {% endfor %}
    {% else %}
        <p>No cars found. <a href="{{ url_for('add_car') }}">Add a car</a> to get started.</p>
    {% endif %}
{% endblock %}